<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tesseract.js/4.0.2/tesseract.min.js"></script>
    <script>
        async function translateText(text, targetLang) {
            let url = `https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=${targetLang}&dt=t&q=${encodeURIComponent(text)}`;
            let response = await fetch(url);
            let data = await response.json();
            return data[0][0][0]; // Extract translated text
        }

        async function processImage(imgElement, targetLang) {
            let imageURL = imgElement.src;
            const { data: { text } } = await Tesseract.recognize(imageURL, 'eng'); // Extract text
            const translatedText = await translateText(text, targetLang); // Translate text
            
            // Overlay translated text
            let canvas = document.createElement("canvas");
            let ctx = canvas.getContext("2d");
            let img = new Image();
            img.src = imageURL;
            img.onload = function () {
                canvas.width = img.width;
                canvas.height = img.height;
                ctx.drawImage(img, 0, 0);
                ctx.fillStyle = "rgba(255, 255, 255, 0.8)"; // Background for text
                ctx.fillRect(20, 20, img.width - 40, 50); // Position of text box
                ctx.fillStyle = "black";
                ctx.font = "24px Arial";
                ctx.fillText(translatedText, 30, 50); // Draw translated text
                imgElement.src = canvas.toDataURL(); // Replace image with translated version
            };
        }

        function translateImages(targetLang) {
            document.querySelectorAll(".menu-container img").forEach(img => processImage(img, targetLang));
        }
    </script>
</head>
<body>

    <h1>Menu</h1>

    <!-- Language Selector -->
    <select onchange="translateImages(this.value)">
        <option value="en">English</option>
        <option value="fr">French</option>
        <option value="es">Spanish</option>
        <option value="de">German</option>
        <option value="it">Italian</option>
        <option value="ar">Arabic</option>
        <option value="zh-CN">Chinese</option>
    </select>

    <div class="menu-container">
        <img src="0-MENUPAGE.png" alt="Menu Page">
        <img src="1-EGGS.png" alt="Eggs">
        <img src="2-TOASTS.png" alt="Toasts">
        <img src="3-MORE%20TOASTS%20AND%20ALSO%20OATS.png" alt="More Toasts and Oats">
        <img src="4-HOT%20FOOD.png" alt="Hot Food">
        <img src="5-DRINKS.png" alt="Drinks">
    </div>

</body>
</html>
